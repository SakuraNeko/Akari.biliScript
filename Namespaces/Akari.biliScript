
/* 命名空间：Akari
 * 包括几个命名空间等级的函数。
 */
Akari = {};

/* 函数：execute
 * 使辅助框架开始执行。
 *
 * mainComp
 *   要展现的弹幕艺术的MainComposition。
 */
Akari.execute = function( mainComp )
{
  // 创建一个全局的引用，这样表达式就可以访问到主合成了。
  Global._set( "__mainComp_akari", mainComp );
  
  // 展现主合成
  mainComp.present();
  
  // 设置全局变量，指明目前正在执行
  Global._set( "__isExecuted_akari", true );
};

/* 函数: stop
 * 停止辅助框架的执行，调试使用。
 */
Akari.stop = function()
{
  ( Global._get("__mainComp_akari") ).detach();
  Global._set( "__mainComp_akari", null );
  Global._set( "__isExecuted_akari", null );
};

/* 函数: isExecuted
 * 判断辅助框架是否已经在执行。
 */
Akari.isExecuted = function()
{
  return ( Global._get("__isExecuted_akari") === true );
};

/* 属性: root
 * 万一$.root被封了，这是一个安全的替代品。
 */
Akari.root = function()
{
  if( $.hasOwnProperty("root") && $.root )
  {
    return $.root;
  }
  else
  {
    var sprite = $.createCanvas(
    {
      lifeTime : 810114514,
      motionGroup : [
        {
          fontSize :
          {
            fromValue : "Ҫ������",
            toValue : "�ж�����",
            lifeTime : 810114514,
            startDelay : 810114514
          }
        }
      ]
    });
    
    // 去除3D，这样显示就清楚了。
    sprite.transform.matrix3D = null;
    
    return sprite;
  }
}();
